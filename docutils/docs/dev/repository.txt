==========================
 The Docutils_ Repository
==========================

:Author: Felix Wiemann
:Revision: $Revision$
:Date: $Date$
:Copyright: This document has been placed in the public domain.

.. _Docutils: http://docutils.sourceforge.net/

.. contents::


Docutils uses a Subversion_ repository located at ``svn.berlios.de``.
Subversion is exhaustively documented in the `Subversion Book`_
(svnbook).

.. _Subversion: http://subversion.tigris.org/
.. _Subversion Book: http://svnbook.red-bean.com/


Accessing the Repository
========================

Web Access
----------

The repository can be browsed and examined via the web at
http://svn.berlios.de/viewcvs/docutils/.


Anonymous Access
----------------

Anonymous (read-only) access is available at ``svn://svn.berlios.de/docutils/``.

To check out the current main source tree of Docutils, type ::

    svn checkout svn://svn.berlios.de/docutils/trunk/docutils

To check out everything (main tree, sandboxes, and web site), type ::

    svn checkout svn://svn.berlios.de/docutils/trunk docutils

This will create a working copy of the whole trunk in a new directory
called ``docutils``.

Note that you should *never* check out
``svn://svn.berlios.de/docutils`` (without "trunk"), because then
you'd end up fetching the whole Docutils tree for every branch and tag
over and over again, wasting your and BerliOS's bandwidth.

To update your working copy later on, cd into the working copy and
type ::

    svn update


Developer Access
----------------

If you are a developer, you get read-write access via
``svn+ssh://username@svn.berlios.de/svnroot/repos/docutils/``, where
``username`` is your BerliOS user name.  So to retrieve a working
copy, type ::

    svn checkout svn+ssh://username@svn.berlios.de/svnroot/repos/docutils/trunk docutils

If you previously had an anonymous working copy and gained developer
access, you can switch the URL associated with your working copy by
typing ::

    svn switch --relocate svn://svn.berlios.de/docutils/trunk/docutils \
        svn+ssh://username@svn.berlios.de/svnroot/repos/docutils

(``username`` is again your BerliOS user name.)


Setting Up Your Subversion Client For Development
`````````````````````````````````````````````````

Before commiting changes to the repository, please ensure that the
following lines are contained (and uncommented) in your
~/.subversion/config file, so that new files are added with the
correct properties set::

    [miscellany]
    # For your convenience:
    global-ignores = ... *.pyc ...
    # For correct properties:
    enable-auto-props = yes

    [auto-props]
    *.py = svn:eol-style=native;svn:keywords=Author Date Id Revision
    *.txt = svn:eol-style=native;svn:keywords=Author Date Id Revision
    *.html = svn:eol-style=native;svn:keywords=Author Date Id Revision
    *.xml = svn:eol-style=native;svn:keywords=Author Date Id Revision
    *.tex = svn:eol-style=native;svn:keywords=Author Date Id Revision
    *.sh = svn:eol-style=native;svn:executable;svn:keywords=Author Date Id Revision
    *.png = svn:mime-type=image/png


Setting Up SSH Access
`````````````````````

With a public & private key pair, you can access the shell and
Subversion servers without having to enter your password.  There are
two places to add your SSH public key on BerliOS: your web account and
your shell account.

* Adding your SSH key to your BerliOS web account:

  1. Log in on the web at https://developer.berlios.de/.  Create your
     account first if necessary.  You should be taken to your "My
     Personal Page" (https://developer.berlios.de/my/).

  2. Choose "Account Options" from the menu below the top banner.

  3. At the bottom of the "Account Maintenance" page
     (https://developer.berlios.de/account/) you'll find a "Shell
     Account Information" section; click on "[Edit Keys]".

  4. Copy and paste your SSH public key into the edit box on this page
     (https://developer.berlios.de/account/editsshkeys.php).  Further
     instructions are available on this page.

* Adding your SSH key to your BerliOS shell account:

  1. Log in to the BerliOS shell server::

         ssh username@shell.berlios.de

     You'll be asked for your password, which you set when you created
     your account.

  2. Create a .ssh directory in your home directory, and remove
     permissions for group & other::

         mkdir .ssh
         chmod og-rwx .ssh

     Exit the SSH session.

  3. Copy your public key to the .ssh directory on BerliOS::

         scp .ssh/id_dsa.pub username@shell.berlios.de:.ssh/authorized_keys

  Now you should be able to start an SSH session without needing your
  password.


Repository Layout
=================

The following tree shows the repository layout::

    docutils/
    |-- branches/
    |   |-- branch1/
    |   |   |-- docutils/
    |   |   |-- sandbox/
    |   |   `-- web/
    |   `-- branch2/
    |       |-- docutils/
    |       |-- sandbox/
    |       `-- web/
    |-- tags/
    |   |-- tag1/
    |   |   |-- docutils/
    |   |   |-- sandbox/
    |   |   `-- web/
    |   `-- tag2/
    |       |-- docutils/
    |       |-- sandbox/
    |       `-- web/
    `-- trunk/
        |-- docutils/
        |-- sandbox/
        `-- web/

``docutils/branches/`` and ``docutils/tags/`` contain (shallow) copies
of the whole trunk.

The main source tree lives at ``docutils/trunk/docutils/``, next to
the sandboxes (``docutils/trunk/sandbox/``) and the web site files
(``docutils/trunk/web/``).
